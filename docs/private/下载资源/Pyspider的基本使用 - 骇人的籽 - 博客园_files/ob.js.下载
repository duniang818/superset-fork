(()=>{var e={193:(e,t,n)=>{const{Ajax:s}=n(262),a="https://lexicon.33across.com/v1/envelope",o="ima",r={GDPR:e=>{let{consentString:t}=e;return{gdpr_consent:t}},CCPA:e=>{let{consentString:t}=e;return{us_privacy:t}},GPP:e=>{let{consentString:t,applicableSections:n=[]}=e;return{gpp:t,gpp_sid:encodeURIComponent(n.join(","))}}},i="33acrossIdFp";e.exports=class{#e;#t;#n;#s=[];#a=[];#o;#r;#i;#c;#l;constructor(e){let{pid:t,apiUrl:n=a,src:r=o,regs:i={},win:c=window}=e,{ajax:l=s,consentDataHandler:p={consentData:Promise.resolve([])},localStorageId:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.#e=t,this.#t=n,this.#n=l,this.#o=p,this.#r=r,this.#i=d,this.#c=i,this.#l=c}#p(e){const t=JSON.parse(e);return t.succeeded?{idEnvelope:t.data.envelope||"",fpId:t.data.fp||""}:{idEnvelope:"",fpId:""}}async#d(e){const{idEnvelope:t,fpId:n}=await this.#h(e);return n?this.#l.localStorage.setItem(i,n):this.#l.localStorage.removeItem(i),t?(this.#i.setId(t),this.#u(t)):(this.#i.clear(),[])}async#h(){let{consentData:e=this.#o.consentData,excludeFp:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=await this.#n({url:this.#t,params:this.#g({allConsentData:await e,fp:t?"":this.#l.localStorage.getItem(i)}),options:{withCredentials:!0,timeout:1e4}});return this.#p(n)}catch(e){throw new Error(`_33AcrossIdMappingsProvider: ${e}`)}}#g(e){let{allConsentData:t,fp:n}=e;return t.reduce(((e,t)=>{let{consentData:n={}}=t;const s=r[n.name];return n.consentString&&s&&Object.assign(e,s(n)),e}),{pid:this.#e,src:this.#r,ver:"1.3.0",...n&&{fp:this.#l.decodeURIComponent(n)},...Number(this.#c.coppa)&&{coppa:1}})}#u(e){const[t]=this.#a,[n]=t.uids;return Object.assign(n,{id:e,atype:1}),this.#s=this.#a,this.#s}async fetch(){this.#a=[{source:"33across.com",uids:[{}]}],this.#o.onChange((e=>{this.#i.clear(),this.#l.localStorage.removeItem(i),this.#d({consentData:e})}));const e=this.#i.getId(),t=await this.#o.hasChangedSinceStored();return this.#i.hasExpired()||!e?this.#d():t?this.#d({excludeFp:!0}):(this.#i.isRefreshRequired()&&this.#d(),this.#u(e))}getIds(){return this.#s}getLoadingIds(){return this.#a}getPid(){return this.#e}getSource(){return this.#r}}},80:(e,t,n)=>{const{loadConsentData:s,LocalStorageId:a}=n(262),o=n(193),r=s(),i="33acrossId";function c(e){let{expires:t,refreshInSeconds:n,...s}=e;const l="esp"===s.src?`${s.src}_${i}`:i,p=new a({idKeyName:l,expires:t,refreshInSeconds:n}),d=new o(s,{consentDataHandler:r,localStorageId:p});return c.providers[d.getSource()]=d,d}c.providers={},e.exports=c},250:(e,t)=>{e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;t.googletag??={},t.googletag.secureSignalProviders??=[],t.googletag.secureSignalProviders.push({id:"33across.com",collectorFunction:()=>e.fetch().then((e=>e[0]?.uids[0].id||null))})}},3:(e,t)=>{function n(e){return e._33across?.idMappingsConfig.pid}e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=n(e);return t?Promise.resolve(t):(function(e,t){!function(e,t,n){const s="_33across.idMappingsConfig.pid".split(".");s.reduce(((e,t,a)=>a===s.length-1?(e[t]=n,n):void 0===e[t]?(e[t]={},e[t]):e[t]),e)}(t,0,e)}(await function(e){return new Promise((t=>{e.setTimeout((async()=>{t(await function(e){return new Promise((t=>{e.pbjs&&e.pbjs.que?e.pbjs.que.push((()=>{t(e.pbjs?.getConfig("userSync.userIds")?.find((e=>{let{name:t}=e;return"33acrossId"===t}))?.params.pid)})):t()}))}(e)||function(e){const t=e._33AcrossIdMappingsProvider?.providers||{},n=t.ima||e._33AcrossPpidMappingsProvider?.providers[0]||t.aps;return n?.getPid()}(e))}),10)}))}(e),e),n(e))}},542:(e,t)=>{e.exports=function(e){return new Promise(((t,n)=>{const s=function(e){let{url:t,params:n={},win:s=window,options:a={}}=e;const o=new s.XMLHttpRequest("MSXML2.XMLHTTP.3.0"),r=new URLSearchParams(n);return o.open("GET",`${t}?${r}`,1),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.withCredentials=a.withCredentials||!0,o.timeout=a.timeout,o}(e);s.onreadystatechange=()=>{4===s.readyState&&(s.status>=200&&s.status<300?t(s.responseText):n(`Ajax: Status code ${s.status}`))},s.onerror=()=>n("Ajax: Network error"),s.ontimeout=()=>n("Ajax: Timeout"),s.send()}))}},346:(e,t,n)=>{const s="iab",a=n(24),o={CCPA:"__uspapi",GDPR:"__tcfapi",GPP:"__gpp"},r={GDPR:"__tcfapiLocator",CCPA:"__uspapiLocator",GPP:"__gppLocator"},i={GDPR:"addEventListener",CCPA:"getUSPData",GPP:"addEventListener"},c={GDPR:2,CCPA:1},l={GDPR(e,t,n){e(t,c.GDPR,n)},CCPA(e,t,n){e(t,c.CCPA,n)},GPP(e,t,n,s){e(t,n,s)}};e.exports=class{#m;#C;#S;#f;#l;#v;#P;#w;constructor(e){let{name:t,userCmp:n=s,win:a=window,config:r={}}=e;this.#m=t,this.#C=o[t],this.#S=n,this.#l=a,this.#v=r.consentTimeout||1e4,this.#P=r.staticConsentData||{}}#I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.#l;try{if("function"==typeof t[this.#C])return{cmpApi:t[this.#C],win:t}}catch(e){}return t.frames[e]?{win:t}:t===this.#l.top?{}:this.#I(e,t.parent)}#D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="boolean"==typeof e.gdprApplies&&e.gdprApplies;return!t||(n=e.tcString)&&"string"==typeof n?{consentData:this.#b({consentString:e.tcString,consentObject:e,additionalFields:{applies:t,..."string"==typeof e.addtlConsent?{addtlConsent:e.addtlConsent}:{}}})}:this.#E(e);var n}#x(e){return t=e?.uspString,t&&"string"==typeof t?{consentData:this.#b({consentString:e.uspString,consentObject:e})}:this.#E(e);var t}#E(e){return this.#y("CMP returned unexpected value during lookup process.",{consentObject:e})}#y(e,t){return{errMsg:e,errArgs:t}}#R(e){const t=e=>Array.isArray(e)&&e.length>0&&0!==e[0];return t(e.applicableSections)?e.applicableSections:t(e.applicableSection)?e.applicableSection:null}#A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({},e,e.pingData);if(!t.gppString||"string"!=typeof t.gppString)return this.#E(t);const n=this.#R(t);return n?{consentData:this.#b({consentString:t.gppString,apiVersion:t.gppVersion,consentObject:t,additionalFields:{applicableSections:n}})}:this.#E(t)}#b(){let{consentString:e,consentObject:t,apiVersion:n=c[this.#m],additionalFields:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{consentString:e,vendorData:t,apiVersion:n,name:this.#m,hash:a(JSON.stringify([e])),...s}}#j(e,t){const n={GDPR:e=>this.#D(e),CCPA:e=>this.#x(e),GPP:e=>this.#A(e)}[this.#m](e);return t&&this.#w?.(n,this.#m),n}#L(e,t){switch(this.#m){case"GDPR":return[!1===e.gdprApplies||"tcloaded"===e.eventStatus||"useractioncomplete"===e.eventStatus];case"CCPA":return[!0];case"GPP":return"sectionChange"===e.eventName?[!0,!0]:"loaded"===e.pingData.cmpStatus?e.pingData.gppString||e.hasOwnProperty("gppString")?[!0]:(this.#M("getGPPData").then(t),[!1]):"ready"===e.pingData.signalStatus?[!0]:"error"===e.pingData.cmpStatus?[!1,!1,"CMP returned with a cmpStatus:error response. Please check CMP setup."]:[!1];default:return[!1]}}#G(e,t){if(arguments.length>2&&void 0!==arguments[2]&&!arguments[2])return void e(this.#y("CMP unable to register callback function.  Please check CMP setup."));const[n,s,a]=this.#L(t,e);n?e(this.#j(t,s)):a?e({errMsg:a}):this.#f=t}#_(e,t){const n=`${this.#C}Return`,s=(e.data?.includes?.(n)?JSON.parse(e.data):e.data)[n];s?.callId&&(t[s.callId]?.(s.returnValue,s.success),delete t[s.callId])}#O(e,t,n){const s={},a=`${this.#C}Call`;this.#l.addEventListener("message",(e=>this.#_(e,s)),!1),function(e,n,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=Math.random().toString(),c={[a]:Object.assign({command:e,callId:i},n&&{version:n},r&&{parameter:r})};s[i]=o,t.postMessage(c,"*")}(e,c[this.#m],n)}#M(e){var t=this;return new Promise((n=>{const{cmpApi:s,win:a}=this.#I(r[this.#m]);if(!a)return void n(this.#y("CMP not found, the CMP script needs to be loaded before the 33across script"));const o=function(){n.fnName=e;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t.#G(n,...a)};s?l[this.#m](s,e,o):this.#O(e,a,o)}))}#T(){return this.#j(this.#P)}onChange(e){this.#w=e}loadConsentData(){const e={iab:()=>this.#M(i[this.#m]),static:()=>this.#T()};let t=null;if(!Object.keys(e).includes(this.#S))return Promise.resolve(this.#y(`The indicated CMP (${this.#S}) is not a supported`));const n=new Promise((e=>{t=this.#l.setTimeout((()=>{const{consentData:t,errMsg:n}=this.#j(this.#f);e(Object.assign(this.#y("CMP hasn't been loaded"),{consentData:n?this.#b():t}))}),this.#v)}));return Promise.race([e[this.#S](),n]).finally((()=>this.#l.clearTimeout(t)))}}},989:(e,t)=>{const n="33acrossId_cst",s=["GPP","CCPA","GDPR"];e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const a={},o=s.reduce(((t,n)=>Object.assign(t,{[n]:e(n)})),{}),r=(e,o)=>{o.consentData&&(a[e]=o,t.localStorage.setItem(n,s.map((e=>a[e]?.consentData?.hash||"")).join(",")))},i=()=>t.localStorage.getItem(n)?.split(",")||[],c=i();let l;return{onChange(e){o.GPP.onChange((t=>{const[n]=i();t.consentData?.hash!==n&&(r("GPP",t),e(Object.values(a)))}))},consentData:new Promise((e=>{const t=Object.entries(o).reduce(((e,t)=>{let[n,s]=t;return(e[n]=s.loadConsentData()).then((e=>r(n,e))),e}),{});Promise.all(Object.values(t)).then((()=>e(Object.values(a)))),t.GPP.then((t=>{t.consentData?.consentString&&e(Object.values(a))}))})),getChangedSinceStoredResult:()=>l,async hasChangedSinceStored(){if(!c)return!0;if(void 0!==l)return l;await this.consentData;const e=s.reduce(((e,t,n)=>Object.assign(e,{[t]:c[n]})),{});return l=!!Object.entries(a).find((t=>{let[n,{consentData:s}]=t;return(s.hash||"")!==e[n]})),l}}}},24:(e,t)=>{e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=function(e,t){if("function"==typeof Math.imul)return Math.imul(e,t);let n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n};let s=3735928559^t,a=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),s=n(s^t,2654435761),a=n(a^t,1597334677);return s=n(s^s>>>16,2246822507)^n(a^a>>>13,3266489909),a=n(a^a>>>16,2246822507)^n(s^s>>>13,3266489909),(4294967296*((2097151&a)+(s>>>0))).toString()}},262:(e,t,n)=>{const s=n(346),a=n(989),o=n(542),r=n(847),i=e=>new s({name:e});e.exports={ConsentManagement:s,loadConsentData:()=>a(i),Ajax:o,LocalStorageId:r}},847:(e,t)=>{const n=28800,s=90;e.exports=class{#U;#V;#l;#N;constructor(e){let{idKeyName:t,refreshInSeconds:a=n,expires:o=s,win:r=window}=e;this.#U={VALUE:t,LAST:`${t}_last`,EXP:`${t}_exp`},this.#l=r,this.#V=a,this.#N=o}#K(e,t){return this.#l.localStorage.setItem(e,t),this}#k(e){return this.#l.localStorage.removeItem(e),this}#$(e){return this.#l.localStorage.getItem(e)}hasExpired(){const e=this.#$(this.#U.EXP);return!!e&&new Date(e).getTime()-Date.now()<=0}isRefreshRequired(){const e=new Date(this.#$(this.#U.LAST));return Date.now()-e.getTime()>1e3*this.#V}setId(e){const t=new Date(Date.now()+864e5*this.#N);this.#K(this.#U.VALUE,e).#K(this.#U.EXP,t.toUTCString()).#K(this.#U.LAST,(new Date).toUTCString())}getId(){return this.#l.decodeURIComponent(this.#$(this.#U.VALUE)||"")}clear(){return this.#k(this.#U.VALUE).#k(this.#U.EXP).#k(this.#U.LAST),this}}}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}(()=>{const e=n(80),t=n(3),s=n(250);!async function(){const n=await t();if(!n)return void console.error("33Across Lexicon ID Mappings Provider: PID not found");const a=new e({src:"esp",pid:n,regs:window._33across?.idMappingsConfig?.regs});s(a)}()})()})();